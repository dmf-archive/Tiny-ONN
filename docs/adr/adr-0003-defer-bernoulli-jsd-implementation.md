---
title: "ADR-0003: 拒绝为元学习损失函数实现独立伯努利JSD"
status: "Rejected"
date: "2025-10-06"
authors: "Ω Researcher, Tiny-ONN 课题组"
tags: ["architecture", "decision", "meta-learning", "loss-function"]
supersedes: ""
superseded_by: ""
---

# ADR-0003: 拒绝为元学习损失函数实现独立伯努利 JSD（IB-JSD）

## 状态 (Status)

Proposed | Accepted | **Rejected** | Superseded | Deprecated

## 背景 (Context)

在尝试解决元学习系统失效和中间层激活过稠密的问题时，我们曾假设问题的根源在于元学习损失函数 (`L_meta`) 的归纳偏置。当时 `L_meta` 采用的 JSD 损失隐式地将专家激活建模为一个“赢家通吃”的**多项式分布**，这与我们当时“专家独立激活”的理论假设相悖。因此，我们提出并实施了一个理论上更纯粹的**独立伯努利JSD (IB-JSD)** 方案。

## 决策 (Decision)

我们决定**正式拒绝**IB-JSD方案，并从代码库中彻底移除其实施。项目将回滚至使用多项式JSD的稳定版本 (`0c57d45`)。此决策源于深刻的理论反思和明确的实验失败。实验证明，IB-JSD实现本身无法激活元学习。更重要的是，后续的理论研讨得出结论：**`Tiny-ONN` 的核心理论框架（IPWT）要求一个竞争性的全局工作空间，这意味着多项式分布的“赢家通吃”归纳偏置是正确的，而IB-JSD所代表的“专家独立”假设是错误的。**

## 后果 (Consequences)

### 积极 (Positive)

- **POS-001**: **理论一致性**: 使损失函数的数学实现与项目的核心理论（IPWT）重新对齐，解决了先前存在的理论矛盾。
- **POS-002**: **明确研究方向**: 结束了在错误理论方向上的探索，使团队能够集中精力解决真正的根本问题——多项式JSD竞争机制的实现效率不足，而非其理论基础错误。
- **POS-003**: **简化代码库**: 移除了复杂且已被证明无效的IB-JSD代码，降低了技术债务。

### 消极 (Negative)

- **NEG-001**: **资源消耗**: 承认在IB-JSD的理论探索、实施和调试上投入了大量的时间和计算资源，但最终证明这是一条死路。
- **NEG-002**: **问题回归**: 项目的研究状态回到了IB-JSD实施之前的起点，即仍然面临“中间层激活过稠密”的初始问题。

## 考虑的备选方案 (Alternatives Considered)

### 采用IB-JSD

- **ALT-001**: **描述 (Description)**: 此方案已被实施。我们将损失函数修改为计算 `d` 个独立的伯努利分布对 (`p_i`, `q_i`) 的JSD，并进行了多次调试。
- **ALT-002**: **拒绝理由 (Rejection Reason)**:
  1. **实验失败**: 在解决了梯度污染等问题后，IB-JSD损失仍然无法收敛，证明元学习循环未能激活。
  2. **理论错误**: 深入的理论复盘表明，IPWT框架下的意识模型需要一个信息广播和竞争的“全局工作空间”，这与伯努利分布的独立假设根本上是矛盾的。多项式分布的竞争性偏置才是正确的理论方向。

## 实施注意事项 (Implementation Notes)

- **IMP-001**: **代码回滚**: 必须将代码库硬重置到 commit `0c57d45`，该版本包含了正确的多项式JSD实现。
- **IMP-002**: **新研究任务**: 应立即启动新的研究任务，调查为何在理论正确的多项式JSD框架下，模型仍然表现出激活过稠密的病态行为。

## 参考文献 (References)

- **REF-001**: `docs/rules/DFC-Theory.md`
- **REF-002**: 相关理论会议的内部讨论记录。
