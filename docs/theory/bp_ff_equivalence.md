---
title: "理论备忘录：在SPL架构中反向传播与前向-前向算法的实现路径"
status: "Formal Draft"
date: "2025-10-09"
authors: "Ω Researcher"
tags:
  [
    "theory",
    "backpropagation",
    "forward-forward",
    "spl",
    "variational-inference",
    "principled-choice",
  ]
---

## 1. 共同的理论基石：变分自由能

在 `Tiny-ONN` 的理论框架下，所有学习算法都服务于一个共同的、底层的理论目标：最小化系统的**变分自由能 (Variational Free Energy, VFE)**。这一目标在实践中被操作化为一个包含**预测准确性 (ℒ_main)** 和**计算效率 (ℒ_meta)** 的复合损失函数：

`ℒ_VFE = ℒ_main + λ ⋅ ℒ_meta`

从这一共同的理论原点出发，存在两条截然不同的实现路径：一条是基于全局梯度的解析路径，另一条是基于局部信号的启发式路径。

## 2. 解析路径：作为高保真信使的反向传播

我们当前选择的路径，是通过反向传播（BP）来获取 VFE 梯度的一个高保真度的、确定性的解析解。在我们的**惊奇感知路由塑造 (Surprise-Aware Routing Shaping, SARS)** 框架中，BP 扮演的不仅仅是误差校正的角色，更是一个传递丰富信息的信使。

其核心的元学习损失 ℒ_meta，是对**贝叶斯反演 (Bayesian Inversion)** 的形式化实现，旨在利用 `ℒ_main` 的全局梯度信息来锐化路由系统隐式的**先验 (Prior)** 信念：

`ℒ_meta = H(Softmax( p - q_detached ))`

这里的关键在于，对数似然代理 **q** (`goodness_logits`) 的构建，直接利用了主任务损失 ℒ_main 对模型内部状态（包括计算权重 **μ** 和有效贡献 **m**）的梯度：

`q = norm(∇_m ℒ_main) ⊙ (norm(m) - norm(∇_μ ℒ_main))`

这意味着，我们的路由决策在每一步都**充分利用了整个计算图的全局信息**。BP 为我们提供了关于“一个微小的参数变动将如何影响最终任务结果”的精确、高维度的洞察。正是这种信息的丰富性与保真度，构成了我们选择此路径的基石。

## 3. 启发式路径：作为高效代理的前向-前向算法

另一条路径是前向-前向算法 (FF)。它放弃了计算昂贵的全局梯度，转而采用一个计算上更为经济的局部“好度”函数，其核心通常是基于**原型匹配度 (R_local)** 的对比学习：

`ℒ_FF_local = -𝔼_{x_pos}[log σ(R_local)] - 𝔼_{x_neg}[log(1 - σ(R_local))]`

SPL 架构的优雅之处在于，它完全有能力支持这种学习范式。这证明了其设计的灵活性与前瞻性。然而，选择这条路径需要接受一个信息上的关键妥协。

FF 的局部奖励 R_local，本质上是 SARS 框架中复杂 `goodness` 信号的一个**低维投影**。它保留了部分关于“收益”的信息，但**完全舍弃了关于“学习成本”** (`norm(∇_μ ℒ_main)`) 的精确度量。

## 4. 我们的选择：对信息保真度的坚持

尽管 SPL 架构为 FF 算法提供了兼容的可能性，但在当前的探索阶段，我们明确地选择 BP 作为唯一的优化路径。这一决策并非基于习惯，而是源于对任务本质的深刻理解。

ARC 任务的核心，是发现离散的、具有因果结构的抽象规则，而非模糊的统计相关性。这就要求优化过程必须具备极其精确的信用分配能力。一个微小的、关键的逻辑步骤走错，其影响可能会在多层计算后被放大或湮没。

- **BP 提供的是手术刀式的精确信号**：它能告诉我们，为了修复最终的逻辑错误，网络中哪一条具体的计算路径上的哪一个神经元需要做出何种调整。
- **FF 提供的是温度计式的模糊信号**：它能判断当前的局部匹配是“好”是“坏”，但无法为复杂的、跨越多个计算步骤的逻辑链条提供精确的归因。

对于 ARC 任务这类需要精确因果推理的场景，FF 信号中的模糊性是不可接受的。它可能会引导模型陷入一个局部匹配度高但全局逻辑错误的“甜点陷阱”。

## 5. 结论：一个有原则的选择

综上所述，SPL 架构的双模态兼容性展示了其设计的鲁棒性与远见，为未来在不同计算约束（如边缘计算）下部署模型预留了可能性。

然而，在当前以探索和发现为核心的研究阶段，我们选择反向传播，这不仅是选择一种算法，更是**选择了一种对理论严谨性和信号保-真度的坚持**。为了在崎岖的损失地形中定位到真正能够泛化的、稀疏的逻辑解，我们必须利用 BP 所能提供的最完整、最精确的信息。
