# G-CAFM 理论发展全长会议记录

**主题**: 从 `SARS` 的失败反思到 `G-CAFM` 的理论构建
**日期**: 2025-10-19 ~ 2025-10-20
**与会者**: Ω Researcher, Architect
**最终结论**: 废弃基于启发式代理的 `SARS` 动力学，采纳基于二阶优化的 `G-CAFM` (高斯-牛顿驱动的内容感知特征掩码) 框架。

---

## 第 1 部分: 初始提案与议程 (源自 `SASOO-meeting-agenda.md`)

### 1.1. 背景与动机

会议旨在解决 `Tiny-ONN` 核心动力学的困境。

- **复盘**: 回顾 `v1` (基于 `transformers` 继承的 `LayerwiseGNOptimizer`) 方案因 `torch.func` 与 `nn.Module` 继承链的深层不兼容而导致的工程实现失败。
- **战略回归**: 确认需要回归到更成熟、解耦的 `DynSIHA/SPL` 手动实现架构。
- **引入新提案**: 正式提出 `SASOO` (Surprise Awareness Second Order Optimize)，将其初步定义为 `SPL` 架构的下一代、基于曲率的元学习动力学。

### 1.2. `SASOO` 核心理论探讨 (初步构想)

- **核心思想**: 将 `SPL` 的路由决策从基于一阶梯度信号 (`goodness`) 升级为基于二阶参数曲率信息。
- **新范式设想**:
  - `meta_loss` 的动力学不再是基于熵或启发式 `goodness`，而是直接升级为 `mu` 参数的 **Gauss-Newton 矩阵 (`G_mu`) 动力学**。
- **EWC-like 机制**:
  - **参数重要性定义**: `G_mu` 直接代表了 `mu` 参数的重要性（曲率）。
  - **Meta Loss**: `meta_loss` 的目标是驱动路由参数 `p` 和 `g` 的更新，使其能预测并适应 `G_mu` 的变化，实现一种内容感知的、基于重要性的正则化。

---

## 第 2 部分: 第一性原理推演与根本性反思 (源自 `theory-meeting-transcript.md`)

在 `SASOO` 的初步构想之上，会议进入了更深层次的第一性原理推演，以诊断 `SARS` 失败的根本原因。

### 2.1. 会议背景与初始问题

会议的核心任务是解决 `exp/arc` 训练体系中的**灾难性遗忘**问题。前任代理的多次尝试均告失败，表明存在更深层次的理论或架构缺陷。

### 2.2. 初步诊断与误区纠正

- **关于“赢家通吃”**: 澄清了该现象是 DFC 的预期特性，而非 bug。
- **关于“二阶优化”**: 纠正了“ARC 任务损失不光滑故二阶无用”的错误观点。从第一性原理出发，**自由能原理 (FEP) 的信念更新在数学上等价于二阶（牛顿）优化** (`Σ = H⁻¹`)。因此，我们追求的近似二阶优化方向是正确的，失败并非源于理论框架，而是源于**对 Hessian 信息的近似精度严重不足**。

### 2.3. 对 `SARS` 框架的根本性质疑

深入的“法医分析”揭示了 `SARS` 失败的两个相互关联的根本原因：

1. **病态的元学习目标**: `L_meta` 旨在最小化熵，这会驱动 `gate_param` 不断变小，使其失去“激活成本”的语义，导致元学习系统自我毁灭。
2. **“梯度死刑”机制**: 在 `LearningDynamics` 中，基于不稳定的 `goodness` 代理的硬二值掩码，会**永久清零**某些计算参数的梯度，使模型无法从错误中学习。这被确认为**灾难性遗忘的直接原因**。

### 2.4. 外部研究调研与最终理论共识

对 `arXiv:2510.09378v1` 的分析证实：

- **逐层高斯-牛顿 (Layerwise GN)** 方法是实现近似二阶优化的黄金标准，其性能远超当前其他方法。
- 这印证了我们的理论目标是正确的，但我们的实现 (`goodness` 函数) 与理想实现之间存在巨大鸿沟。

**最终理论共识**:

1. **方向正确**: 基于 FEP 的近似二阶优化是项目的正确基石。
2. **失败源于实现**: 灾难性失败源于对 Hessian 信息（即参数重要性）的**近似精度严重不足**。
3. **核心问题**: `goodness` 函数是对曲率的拙劣模仿，而 `meta_loss` 和梯度门控是对这个不精确信号的**错误使用**。

---

## 第 3 部分: 理论综合与 `G-CAFM` 的诞生

在上述推演的基础上，会议达成了最终的理论综合，正式提出了 `G-CAFM` 框架，取代了最初的 `SASOO` 构想。

### 3.1. 核心思想

`G-CAFM` 框架不再试图用一个独立的元学习系统来“猜测”参数重要性，而是将**二阶优化过程本身作为信息来源**。

- **决策**: 废弃启发式 `goodness`，使用 **`diag(G)` (高斯-牛顿矩阵对角线)** 作为参数重要性的直接度量。
- **统一动力学**: 路由决策（CAFM 掩码的生成）直接由 `diag(G)` 驱动。这使得路由成为主优化循环的一个确定性副产品，从而消除了独立的 `meta_loss` 和不稳定的元学习动态。
- **与 EWC 的关联**: 该机制在功能上等价于一个**内容感知的、在线的弹性权重巩固 (EWC)**。它不是通过惩罚损失来保护重要参数，而是通过门控机制，优先激活那些对当前任务重要的计算路径。

### 3.2. 结论

本次系列会议从一个模糊的 `SASOO` 构想出发，通过对 `SARS` 失败的根本原因进行第一性原理分析，最终推演出一个理论上更完备、架构上更统一的 `G-CAFM` 框架。这为 `Tiny-ONN` 项目的核心动力学重构工作提供了清晰、坚实的理论基础。

**会议结束。**
